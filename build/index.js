module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=23)}([function(e,t){e.exports=require("react")},function(e,t,r){var n=r(16);"string"==typeof n&&(n=[[e.i,n,""]]);var s={insert:"head",singleton:!1};r(18)(n,s);n.locals&&(e.exports=n.locals)},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("three/src/math/Vector2.js")},function(e,t){e.exports=require("three/src/math/Color.js")},function(e,t){e.exports=require("three/src/math/Vector3.js")},function(e,t){e.exports=require("reselect")},function(e,t){e.exports=require("polylinear-scale")},function(e,t){e.exports=require("three/src/renderers/WebGLRenderer.js")},function(e,t){e.exports=require("three/src/scenes/Scene.js")},function(e,t){e.exports=require("three/src/cameras/PerspectiveCamera.js")},function(e,t){e.exports=require("three/src/objects/Mesh.js")},function(e,t){e.exports=require("three/src/geometries/CircleGeometry.js")},function(e,t){e.exports=require("three/src/materials/MeshBasicMaterial.js")},function(e,t){e.exports=require("three/src/core/Raycaster.js")},function(e,t){e.exports=require("eventemitter3")},function(e,t,r){(t=e.exports=r(17)(!1)).push([e.i,"._1s0OEhJj1LcYhiSd1QguXE{font-family:'proxima-nova', sans-serif;font-size:16px;font-weight:300;line-height:1.3;color:#444444;display:flex;background:#F6F6F6;padding:50px 50px;box-sizing:border-box}._3NkwkHfeT6Rp-XYhurDGx9{flex-grow:1;position:relative;border-top:solid 1px #444444;border-bottom:solid 1px #444444}._3NkwkHfeT6Rp-XYhurDGx9 canvas{position:absolute;top:0;left:0}._1-jwqTia_zdvvp6LYoiA55{flex-grow:0;flex-shrink:1;flex-basis:400px;margin-left:40px;font-size:1rem;font-weight:500;background:#F6F6F6;z-index:100;text-align:left;border-top:solid 6px #444444;border-bottom:solid 1px #444444;overflow-y:auto}._1-jwqTia_zdvvp6LYoiA55 h1{font-weight:600;font-size:1.6rem;margin:20px 0px 30px 0px}._1-jwqTia_zdvvp6LYoiA55 h2{font-weight:600;font-size:1rem;margin:0px 0px 8px 0px}._1CPdmAXIm8YoGtDIubfpuH{border-top:solid 1px #444444;padding:40px 0px 40px 0px}._1IPxoY07NBVOTcl8uZpquK{margin-bottom:10px;display:flex;justify-content:space-between}._3veko3isg7mthhyenBmA9i{flex-grow:1;margin:auto 20px}._3veko3isg7mthhyenBmA9i hr{border:0;height:0;margin:0;border-bottom:1px solid rgba(70,70,70,0.3)}\n",""]),t.locals={section:"_1s0OEhJj1LcYhiSd1QguXE","canvas-container":"_3NkwkHfeT6Rp-XYhurDGx9",nav:"_1-jwqTia_zdvvp6LYoiA55",list:"_1CPdmAXIm8YoGtDIubfpuH",skill:"_1IPxoY07NBVOTcl8uZpquK",skill__line:"_3veko3isg7mthhyenBmA9i"}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var s=(a=n,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(c," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot).concat(e," */")}));return[r].concat(i).concat([s]).join("\n")}var a,o,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var i=this[s][0];null!=i&&(n[i]=!0)}for(var a=0;a<e.length;a++){var o=e[a];null!=o[0]&&n[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="(".concat(o[2],") and (").concat(r,")")),t.push(o))}},t}},function(e,t,r){"use strict";var n,s={},i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}();function o(e,t){for(var r=[],n={},s=0;s<e.length;s++){var i=e[s],a=t.base?i[0]+t.base:i[0],o={css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(o):r.push(n[a]={id:a,parts:[o]})}return r}function c(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=s[n.id],a=0;if(i){for(i.refs++;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(v(n.parts[a],t))}else{for(var o=[];a<n.parts.length;a++)o.push(v(n.parts[a],t));s[n.id]={id:n.id,refs:1,parts:o}}}}function l(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var n=r.nc;n&&(e.attributes.nonce=n)}if(Object.keys(e.attributes).forEach((function(r){t.setAttribute(r,e.attributes[r])})),"function"==typeof e.insert)e.insert(t);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var s=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,s);else{var i=document.createTextNode(s),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t,r){var n=r.css,s=r.media,i=r.sourceMap;if(s&&e.setAttribute("media",s),i&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,f=0;function v(e,t){var r,n,s;if(t.singleton){var i=f++;r=m||(m=l(t)),n=p.bind(null,r,i,!1),s=p.bind(null,r,i,!0)}else r=l(t),n=d.bind(null,r,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i());var r=o(e,t);return c(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i],l=s[a.id];l&&(l.refs--,n.push(l))}e&&c(o(e,t),t);for(var u=0;u<n.length;u++){var h=n[u];if(0===h.refs){for(var p=0;p<h.parts.length;p++)h.parts[p]();delete s[h.id]}}}}},function(e,t){e.exports=require("three/src/lights/AmbientLight.js")},function(e,t){e.exports=require("three/src/objects/Line.js")},function(e,t){e.exports=require("three/src/core/Geometry.js")},function(e,t){e.exports=require("three/src/materials/LineBasicMaterial.js")},function(e,t,r){"use strict";r.r(t);var n=r(2),s=r.n(n),i=r(0),a=r.n(i),o=r(7),c=r.n(o),l=r(1),u=r.n(l);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const p=({term:e,freq:t,total:r})=>a.a.createElement("div",{className:u.a.skill},a.a.createElement("div",{className:u.a.skill__term},e),a.a.createElement("div",{className:u.a.skill__line},a.a.createElement("hr",null)),a.a.createElement("div",{className:u.a.skill__freq},t));var d=({skillList:e})=>0===e.length?a.a.createElement("nav",{className:u.a.nav},a.a.createElement("h1",null,"Your company's skills group"),a.a.createElement("div",{className:u.a.list},a.a.createElement("div",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Lacus vel facilisis volutpat est velit egestas. Eget sit amet tellus cras adipiscing enim eu. Fringilla phasellus faucibus scelerisque eleifend donec. Mi bibendum neque egestas congue quisque egestas. Leo vel orci porta non pulvinar neque laoreet suspendisse. Donec et odio pellentesque diam volutpat commodo sed. Aliquet nec ullamcorper sit amet. Risus viverra adipiscing at in tellus integer feugiat scelerisque. ",a.a.createElement("br",null),a.a.createElement("br",null),"Nullam eget felis eget nunc lobortis mattis aliquam faucibus. Vel elit scelerisque mauris pellentesque pulvinar pellentesque. Magna sit amet purus gravida quis blandit turpis cursus in. Eget nulla facilisi etiam dignissim diam quis enim. Pellentesque diam volutpat commodo sed egestas egestas fringilla. Tellus elementum sagittis vitae et leo duis ut diam quam. Sed id semper risus in hendrerit gravida rutrum quisque non. Malesuada bibendum arcu vitae elementum curabitur vitae. Sollicitudin aliquam ultrices sagittis orci a scelerisque purus semper eget. Feugiat vivamus at augue eget arcu dictum."))):a.a.createElement("nav",{className:u.a.nav},a.a.createElement("h1",null,e.slice(0,2).map(e=>e.term).join(", ")),a.a.createElement("div",null,a.a.createElement("h2",null,"Skills:")),a.a.createElement("div",{className:u.a.list},e.map(e=>a.a.createElement(p,h({key:e.term},e))))),m=r(8),f=r(9),v=(r(19),r(4)),g=r(10),b=r(5),x=r(11),y=(r(20),r(12)),q=(r(21),r(22),r(13)),j=r(14),w=r(3);class C{constructor(e){const{x:t,y:r}=e||{x:999999,y:999999};this.position=new w.Vector2(t,r),this.intersectObject=void 0}set intersect(e){document.body.style.cursor=e?"pointer":"default",this.intersectObject=e}get intersect(){return this.intersectObject}}const M=e=>{const t=window.getComputedStyle(e),r=t.getPropertyValue("width"),n=t.getPropertyValue("height"),{top:s,left:i,bottom:a,right:o}=e.getBoundingClientRect();return{width:parseInt(r),height:parseInt(n),top:s,left:i,bottom:a,right:o}};var E=r(15),_=r.n(E);class k extends _.a{constructor({canvas:e,canvasContainer:t,clusters:r}){super(),this.canvas=e,this.canvasContainer=t,this.onMouseUp=this.onMouseUp.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.canvasContainer.addEventListener("mouseup",this.onMouseUp,!1),this.canvasContainer.addEventListener("mousemove",this.onMouseMove,!1);this.renderer=new m.WebGLRenderer({canvas:this.canvas,antialias:!0,alpha:!0}),this.renderer.setPixelRatio(2),this.scene=new f.Scene,this.camera=new g.PerspectiveCamera(70,1,1,1e5),this.camera.lookAt(new b.Vector3(0,0,0)),this.camera.position.z=2,this.clusters=[],r.forEach(e=>{const t=new x.Mesh(new y.CircleGeometry(e.radius,64),new q.MeshBasicMaterial({color:6710886,opacity:.3,transparent:!0}));t.position.set(e.position.x,e.position.y,-e.radius/100),t.userData=e,this.clusters.push(t),this.scene.add(t)}),this.raycaster=new j.Raycaster,this.mouse=new C,this.render=this.render.bind(this),this.animate=this.animate.bind(this)}start(){this.animate()}onMouseMove(e){e.preventDefault();const{left:t,top:r,right:n,bottom:s}=M(this.canvasContainer);if(this.mouse.position.set((e.clientX-t)/(n-t)*2-1,-(e.clientY-r)/(s-r)*2+1),this.mouse.intersect){const{topic:e}=this.mouse.intersect.object.userData;this.emit("object-click",this.mouse.intersect.object.userData),this.clusters.forEach(t=>{const r=new v.Color("#0096ff"),n=new v.Color("#666666"),s=e==t.userData.topic?r:n,i=e==t.userData.topic?.8:.3;t.material.color.equals(s)||(t.material.color=s,t.material.opacity=i)})}}onMouseUp(){this.mouse.intersect&&this.emit("object-click",this.mouse.intersect.object.userData)}onResize(){const{left:e,top:t,right:r,bottom:n}=M(this.canvasContainer),s=r-e,i=n-t;this.canvas.width=s,this.canvas.height=i,this.camera.aspect=s/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(s,i),this.render()}toScreenPosition(e,t){const r=new b.Vector3,n=.5*this.canvas.width,s=.5*this.canvas.height;return e.updateMatrixWorld(),r.setFromMatrixPosition(e.matrixWorld),r.project(t),r.x=r.x*n+n,r.y=-r.y*s+s,{x:r.x,y:r.y}}animate(e){this.render(e),this.timeout=setTimeout(()=>{this.raf=requestAnimationFrame(this.animate)},1e3/30)}render(e){this.raycaster.setFromCamera(this.mouse.position,this.camera);const t=this.raycaster.intersectObjects(this.clusters);this.mouse.intersect=t[0],this.renderer.render(this.scene,this.camera)}destory(){clearTimeout(this.timeout),cancelAnimationFrame(this.raf),this.canvasContainer.removeEventListener("mouseup",this.onMouseUp),this.canvasContainer.removeEventListener("mousemove",this.onMouseMove),this.renderer.context=null,this.renderer.domElement=null,this.renderer=null}getElement(){return this.canvas}}class R{get radius(){return this.freq}constructor(e){const{x:t,y:r,topic:n,freq:s}=e;this.position=new w.Vector2(t,r),this.topic=n,this.freq=s}}var O=({skillList:e})=>a.a.createElement("nav",{className:u.a.labels}),S=r(6);class L{constructor(e){const{term:t,freq:r,total:n}=e;this.term=t,this.freq=r,this.total=n}}const N=e=>e.tinfo,T=e=>{const t=(e=>Object(S.createSelector)(N,t=>{const r=t.Category,n="Topic"+e;return[r.indexOf(n),r.lastIndexOf(n)]}))(e);return Object(S.createSelector)(N,t,(t,r)=>{if(!e)return[];const[n,s]=r,i=[];for(let e=n;e<s;e++)i.push(new L({term:t.Term[e],freq:t.Freq[e],total:t.Total[e]}));return i.sort((e,t)=>t.freq-e.freq)})},D=(e,t)=>e.reduce((e,r)=>{const n=c()([Math.min(...r),Math.max(...r)],t);return e.concat([r.map(e=>n(e))])},[]);class P extends a.a.Component{constructor(e){super(e),this.rootRef=Object(i.createRef)(),this.canvasContainerRef=Object(i.createRef)(),this.canvasRef=Object(i.createRef)(),this.onClusterClick=this.onClusterClick.bind(this),this.renderer=void 0,this.state={setSelectedClusterId:void 0}}async componentDidMount(){const{data:e}=this.props,t=e.mdsDat,r=t.topics.length,[n,i]=D([e.mdsDat.x,e.mdsDat.y],[-1,1]),[a]=D([t.Freq],[.05,.3]);console.log(t.Freq);const o=s.a.range(r).map(e=>new R({x:n[e],y:i[e],topic:t.topics[e],freq:a[e]}));this.renderer=new k({canvasContainer:this.canvasContainerRef.current,canvas:this.canvasRef.current,clusters:o}),this.renderer.on("object-click",this.onClusterClick),this.renderer.start()}componentWillUnmount(){this.renderer.destory()}componentDidUpdate(e){const{current:t}=this.rootRef,{width:r,height:n}=this.props;e.width==r&&e.height==n||(t.style.width=r+"px",t.style.height=n+"px",this.renderer.onResize())}onClusterClick(e){this.setState({selectedClusterId:e.topic})}render(){const{data:e}=this.props,{selectedClusterId:t}=this.state,r=T(t)(e);return a.a.createElement("section",{className:u.a.section,ref:this.rootRef},a.a.createElement("div",{ref:this.canvasContainerRef,className:u.a["canvas-container"]},a.a.createElement("canvas",{ref:this.canvasRef}),a.a.createElement(O,null)),a.a.createElement(d,{skillList:r}))}}t.default=P}]);